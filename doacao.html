<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contribuições - Igreja</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .receipt-preview {
            max-width: 100%;
            max-height: 200px;
            display: none;
            margin-top: 10px;
            border: 1px dashed #ccc;
            padding: 5px;
            border-radius: 5px;
        }
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-md overflow-hidden">
            <!-- Header -->
            <div class="bg-blue-700 py-6 px-6 text-center">
                <h1 class="text-3xl font-bold text-white animate-pulse">
                    <i class="fas fa-church mr-2"></i> Contribuições Espirituais
                </h1>
                <p class="text-blue-100 mt-2">"Cada um contribua segundo propôs no seu coração..." (2 Coríntios 9:7)</p>
            </div>

            <!-- Form -->
            <div class="p-6">
                <form id="donationForm" class="space-y-6">
                    <!-- Doador Info -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Seu Nome</label>
                        <input type="text" id="name" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Nome completo" required>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Telefone</label>
                        <input type="tel" id="phone" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="+244..." required>
                    </div>

                    <!-- Tipo de Contribuição -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Tipo de Contribuição</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center">
                                <input type="radio" id="tithe" name="donationType" value="Dízimo" class="h-5 w-5 text-blue-600" checked>
                                <label for="tithe" class="ml-2 block text-gray-700"><i class="fas fa-hand-holding-usd mr-1"></i> Dízimo</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="offering" name="donationType" value="Oferta" class="h-5 w-5 text-blue-600">
                                <label for="offering" class="ml-2 block text-gray-700"><i class="fas fa-gift mr-1"></i> Oferta</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="maintenance" name="donationType" value="Manutenção e abertura de Templo" class="h-5 w-5 text-blue-600">
                                <label for="maintenance" class="ml-2 block text-gray-700"><i class="fas fa-tools mr-1"></i> Manutenção do Templo</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="evangelism" name="donationType" value="Evangelismo e Missões" class="h-5 w-5 text-blue-600">
                                <label for="evangelism" class="ml-2 block text-gray-700"><i class="fas fa-globe-africa mr-1"></i> Evangelismo e Missões</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="crusade" name="donationType" value="Cruzada Evangelística Cristo Vive" class="h-5 w-5 text-blue-600">
                                <label for="crusade" class="ml-2 block text-gray-700"><i class="fas fa-cross mr-1"></i> Cruzada Cristo Vive</label>
                            </div>
                        </div>
                    </div>

                    <!-- Valor -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Valor (Kz)</label>
                        <input type="number" id="amount" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="1000" required>
                    </div>

                    <!-- Data -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Data</label>
                        <input type="date" id="date" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>

                    <!-- Comprovativo -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Comprovativo de Transferência</label>
                        <div class="flex items-center justify-center w-full">
                            <label for="receipt" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                    <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Clique para enviar</span> ou arraste o arquivo</p>
                                    <p class="text-xs text-gray-500">PNG, JPG ou PDF (MAX. 5MB)</p>
                                </div>
                                <input id="receipt" type="file" class="hidden" accept="image/*,.pdf" />
                            </label>
                        </div>
                        <img id="receiptPreview" class="receipt-preview" alt="Pré-visualização do comprovativo">
                    </div>

                    <!-- Mensagem -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">Mensagem (Opcional)</label>
                        <textarea id="message" rows="3" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Deixe uma mensagem ou pedido de oração..."></textarea>
                    </div>

                    <!-- Botão de Envio -->
                    <div class="pt-4">
                        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center">
                            <i class="fab fa-whatsapp mr-2 text-xl"></i> Enviar para WhatsApp
                        </button>
                    </div>
                </form>
            </div>

            <!-- Footer -->
            <div class="bg-gray-100 px-6 py-4 text-center">
                <p class="text-gray-600 text-sm">"Deus ama ao que dá com alegria." (2 Coríntios 9:7)</p>
                <div class="mt-2 flex justify-center space-x-4">
                    <a href="#" class="text-blue-600 hover:text-blue-800"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="text-blue-400 hover:text-blue-600"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-red-500 hover:text-red-700"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;

            // Preview receipt image
            const receiptInput = document.getElementById('receipt');
            const receiptPreview = document.getElementById('receiptPreview');

            receiptInput.addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        receiptPreview.src = e.target.result;
                        receiptPreview.style.display = 'block';
                    }
                    reader.readAsDataURL(file);
                }
            });

            // Form submission
            const form = document.getElementById('donationForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;
                const donationType = document.querySelector('input[name="donationType"]:checked').value;
                const amount = document.getElementById('amount').value;
                const date = document.getElementById('date').value;
                const message = document.getElementById('message').value;
                const receipt = receiptInput.files[0];
                
                // Format WhatsApp message
                let whatsappMessage = `*Nova Contribuição*\n\n`;
                whatsappMessage += `*Nome:* ${name}\n`;
                whatsappMessage += `*Telefone:* ${phone}\n`;
                whatsappMessage += `*Tipo:* ${donationType}\n`;
                whatsappMessage += `*Valor:* ${amount} Kz\n`;
                whatsappMessage += `*Data:* ${date}\n`;
                if (message) {
                    whatsappMessage += `*Mensagem:* ${message}\n`;
                }
                
                const whatsappNumber = '+244921652665';
                let whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;
                
                // If there's a receipt, we need to send it separately
                if (receipt) {
                    // First open chat with text
                    window.open(whatsappUrl, '_blank');
                    
                    // Then prepare to send the file (user will need to manually attach)
                    alert('Por favor, anexe o comprovativo na conversa do WhatsApp que será aberta.');
                } else {
                    // Just send text
                    window.open(whatsappUrl, '_blank');
                }
                
                // Reset form
                form.reset();
                receiptPreview.style.display = 'none';
                document.getElementById('date').value = today;
            });
        });
    </script>
</body>
</html>
